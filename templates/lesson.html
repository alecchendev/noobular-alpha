<!DOCTYPE html>
<html>
<head>
    <title>{{ lesson.title }} - {{ course.title }}</title>
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
</head>
<body>
    <h1>{{ lesson.title }}</h1>
    <p><strong>Course:</strong> {{ course.title }}</p>

    {% if lesson.blocks|length >= 1 %}
        {% set block = lesson.blocks[0] %}
        {% if block.kind == "content" %}
            <p>{{ block.content }}</p>
        {% elif block.kind == "question" %}
            <div class="question">
                <p><strong>{{ block.prompt }}</strong></p>
                <form>
                    {% for choice in block.choices %}
                        <label>
                            <input type="radio" name="answer" value="{{ loop.index0 }}">
                            {{ choice.text }}
                        </label><br>
                    {% endfor %}
                </form>
            </div>
        {% endif %}
    {% endif %}

    {% if lesson.blocks|length > 1 %}
    <button
        id="submit-button"
        hx-post="/course/{{ course.route }}/lesson/{{ lesson.route }}/next"
        hx-target="#submit-button"
        hx-vals='{"block_index": 1}'
        hx-swap="outerHTML"
    >Next</button>
    {% endif %}

    <a href="/course/{{ course.route }}">‚Üê Back to {{ course.title }}</a>
</body>
</html>
